(this["webpackJsonptest-profilance"]=this["webpackJsonptest-profilance"]||[]).push([[0],{29:function(e,t,a){e.exports=a(40)},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),l=a.n(c),o=a(11),u=a(3);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(9),s=a(4),m={showPopupAuth:!1,showPopupArticle:!1},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/TURN_POPUP_AUTH":return Object(s.a)(Object(s.a)({},e),{},{showPopupAuth:!e.showPopupAuth});case"APP/TURN_POPUP_ARTICLE":return Object(s.a)(Object(s.a)({},e),{},{showPopupArticle:!e.showPopupArticle});default:return e}},d={user:null},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER/FETCH_USER":return Object(s.a)(Object(s.a)({},e),{},{user:t.payload});default:return e}},b=a(23),f={news:null},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEWS/FETCH_NEWS":return Object(s.a)(Object(s.a)({},e),{},{news:t.payload});case"NEWS/ADD_NEWS":var a=[Object(s.a)({id:e.news.length},t.payload)].concat(Object(b.a)(e.news));return Object(s.a)(Object(s.a)({},e),{},{news:a});case"NEWS/DELETE_NEWS":var n=e.news.filter((function(e){return e.id!==t.payload}));return Object(s.a)(Object(s.a)({},e),{},{news:n});case"NEWS/EDIT_NEWS":var r=e.news.findIndex((function(e){return e.id===t.payload.id})),c=Object(b.a)(e.news);return c[r]=t.payload,Object(s.a)(Object(s.a)({},e),{},{news:c});default:return e}},O=Object(i.combineReducers)({app:p,user:E,news:v}),h=a(27),N=a(28),j=Object(i.createStore)(O,Object(N.composeWithDevTools)(Object(i.applyMiddleware)(h.a))),w=a(2),_=function(){var e=Object(u.c)((function(e){return e.user.user}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"page"},r.a.createElement("h2",null,"\u041f\u0440\u0438\u0432\u0435\u0442, ",e?e.login:"\u0413\u043e\u0441\u0442\u044c")))},y=a(6);var P=function(e){var t=e.article,a=Object(u.b)(),n=Object(u.c)((function(e){return e.user.user}));return r.a.createElement("article",{className:"article"},r.a.createElement("h2",null,t.title),r.a.createElement("p",null,t.text),n&&n.isAdmin&&r.a.createElement("div",null,!t.approved&&r.a.createElement("button",{onClick:function(){return a(function(e){return{type:"NEWS/EDIT_NEWS",payload:e}}(Object(s.a)(Object(s.a)({},t),{},{approved:!0})))},className:"button"},"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"),r.a.createElement("button",{onClick:function(){return a({type:"NEWS/DELETE_NEWS",payload:t.id})},className:"button"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))};var g=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return[e.news.news,e.user.user]})),a=Object(y.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),i=Object(y.a)(o,2),s=i[0],m=i[1];Object(n.useEffect)((function(){var e=c;l&&!l.isAdmin?e=e.filter((function(e){return e.approved||e.authorId===l.id})):!l&&e&&(e=e.filter((function(e){return e.approved}))),m(e)}),[c,l]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"page"},l&&r.a.createElement("div",{className:"page__buttons"},r.a.createElement("button",{onClick:function(){return e({type:"APP/TURN_POPUP_ARTICLE"})},className:"button"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c")),r.a.createElement("div",{className:"articles"},s&&s.map((function(e){return r.a.createElement(P,{key:e.id,article:e})})))))};function S(e){return{type:"USER/FETCH_USER",payload:e}}var A=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.user.user}));return r.a.createElement("nav",{className:"nav"},r.a.createElement(o.b,{className:"nav__link",to:"/"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),r.a.createElement(o.b,{className:"nav__link",to:"/news"},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"),t?r.a.createElement("span",{onClick:function(){return e(S(null))},className:"nav__link"},"\u0412\u044b\u0439\u0442\u0438"):r.a.createElement("span",{onClick:function(){return e({type:"APP/TURN_POPUP_AUTH"})},className:"nav__link"},"\u0412\u043e\u0439\u0442\u0438"))},T=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.app.showPopupAuth})),a=Object(n.useState)(!1),c=Object(y.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(""),s=Object(y.a)(i,2),m=s[0],p=s[1],d=Object(n.useState)(""),E=Object(y.a)(d,2),b=E[0],f=E[1],v=[{id:1,login:"admin",password:"admin",isAdmin:!0},{id:2,login:"user",password:"user",isAdmin:!1}],O=function(e){var t=e.currentTarget,a=t.name,n=t.value;"login"===a?p(n):"password"===a&&f(n)},h=function(){o(!1),p(""),f(""),e({type:"APP/TURN_POPUP_AUTH"})};return r.a.createElement("div",{className:"popup ".concat(t&&"popup__show")},r.a.createElement("div",{className:"window"},r.a.createElement("h4",{className:"window__title"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault();var a=v.find((function(e){return e.login===m&&e.password===b}));a?(e(S(a)),h()):o(!0)}(t)}},r.a.createElement("input",{onChange:function(e){return O(e)},value:m,name:"login",className:"input",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",maxLength:"50"}),r.a.createElement("input",{onChange:function(e){return O(e)},value:b,name:"password",className:"input",autoComplete:"on",type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",maxLength:"50"}),r.a.createElement("small",{className:"form__error",style:{display:l?"inline":"none"}},"\u041b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d \u043d\u0435\u0432\u0435\u0440\u043d\u043e!"),r.a.createElement("div",{className:"form__buttons"},r.a.createElement("button",{className:"button",type:"submit"},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement("button",{onClick:function(){return h()},type:"button",className:"button"},"\u041e\u0442\u043c\u0435\u043d\u0430"))))))},C=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return[e.app.showPopupArticle,e.user.user]})),a=Object(y.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(y.a)(o,2),s=i[0],m=i[1],p=Object(n.useState)(""),d=Object(y.a)(p,2),E=d[0],b=d[1],f=Object(n.useState)(""),v=Object(y.a)(f,2),O=v[0],h=v[1],N=function(e){var t=e.currentTarget,a=t.name,n=t.value;"title"===a?b(n):"text"===a&&h(n)},j=function(){m(!1),b(""),h(""),e({type:"APP/TURN_POPUP_ARTICLE"})};return r.a.createElement("div",{className:"popup ".concat(c&&"popup__show")},r.a.createElement("div",{className:"window"},r.a.createElement("h4",{className:"window__title"},"\u041d\u043e\u0432\u0430\u044f \u043d\u043e\u0432\u043e\u0441\u0442\u044c"),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(t){return function(t){(t.preventDefault(),E.trim()&&O.trim())?(e({type:"NEWS/ADD_NEWS",payload:{title:E.trim(),text:O.trim(),approved:!1,authorId:l.id}}),j()):m(!0)}(t)}},r.a.createElement("input",{onChange:function(e){return N(e)},value:E,name:"title",className:"input",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",maxLength:"50"}),r.a.createElement("textarea",{onChange:function(e){return N(e)},name:"text",value:O,className:"input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",maxLength:"500"}),r.a.createElement("small",{className:"form__error",style:{display:s?"inline":"none"}},"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f \u043f\u0435\u0440\u0435\u0434 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u043e\u0439!"),r.a.createElement("div",{className:"form__buttons"},r.a.createElement("button",{className:"button",type:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),r.a.createElement("button",{onClick:function(){return j()},type:"button",className:"button"},"\u041e\u0442\u043c\u0435\u043d\u0430"))))))},U=Object(w.f)((function(){var e=Object(u.b)();return Object(n.useEffect)((function(){e({type:"NEWS/FETCH_NEWS",payload:[{id:0,title:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c 3",text:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f (\u043d\u0435 \u043f\u0440\u0438\u043d\u044f\u0442\u0430)",approved:!1,authorId:2},{id:1,title:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c 1",text:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0430",approved:!0,authorId:1},{id:2,title:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c 2",text:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",approved:!0,authorId:2}]})}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement(w.c,null,r.a.createElement(w.a,{path:"/",exact:!0,component:_}),r.a.createElement(w.a,{path:"/news",exact:!0,component:g})),r.a.createElement(T,null),r.a.createElement(C,null))}));a(39);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:j},r.a.createElement(o.a,null,r.a.createElement(U,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.3b4de066.chunk.js.map